<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#7BA591">
  <meta name="description" content="Kostenlose Lernapps fÃ¼r Mathe und Deutsch. Werbefrei und ohne Anmeldung fÃ¼r die Grundschule.">
  <title>Lernapps â€¢ Mathe & Deutsch fÃ¼r die Grundschule</title>
  
  <!-- Runde, freundliche Schriftart fÃ¼r Bildungs-Apps -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    /* --- RESET & BASICS --- */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    :root {
      /* Palette refined for softness */
      --primary: #7BA591;
      --primary-dark: #5D8A75;
      --primary-light: #E3F0E9;
      
      --accent: #E8B86D;
      --accent-dark: #D49D4A;
      
      --text-main: #2D3A32;
      --text-muted: #6B7C70;
      
      --bg-page: #F7F5F2; /* Warm paper tone */
      --bg-surface: #FFFFFF;
      
      /* App Specific Colors */
      --color-mathe: #88B894;
      --color-mathe-bg: #E8F3EB;
      --color-schreiben: #E8B86D;
      --color-schreiben-bg: #FFF8EB;
      --color-deutsch: #D4816F;
      --color-deutsch-bg: #FDF2F0;
      --color-logik: #7EA8BE;
      --color-logik-bg: #EFF6FA;

      /* Spacing & Radius */
      --radius-sm: 8px;
      --radius-md: 16px;
      --radius-lg: 24px;
      --radius-full: 999px;
      
      --shadow-sm: 0 2px 4px rgba(61, 79, 66, 0.04);
      --shadow-md: 0 8px 20px rgba(61, 79, 66, 0.08);
      --shadow-lg: 0 12px 30px rgba(61, 79, 66, 0.12);
      
      --font-stack: 'Nunito', -apple-system, sans-serif;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font-stack);
      background-color: var(--bg-page);
      color: var(--text-main);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    /* --- LAYOUT SHELL --- */
    .page-wrapper {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 0;
      background-image: radial-gradient(#E3DED7 1px, transparent 1px);
      background-size: 24px 24px; /* Dot pattern */
    }

    .app-shell {
      width: 100%;
      max-width: 680px;
      background: var(--bg-surface);
      display: flex;
      flex-direction: column;
      box-shadow: var(--shadow-lg);
      position: relative;
    }

    @media (min-width: 700px) {
      .page-wrapper { padding: 40px 20px; }
      .app-shell { border-radius: 32px; overflow: hidden; }
    }

    /* --- TOPBAR --- */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 16px 20px;
      padding-top: calc(16px + env(safe-area-inset-top));
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(0,0,0,0.05);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 800;
      font-size: 1.25rem;
      color: var(--primary-dark);
    }
    
    .brand svg { width: 24px; height: 24px; color: var(--primary); }

    .grade-badge {
      font-size: 0.75rem;
      background: var(--primary-light);
      color: var(--primary-dark);
      padding: 6px 12px;
      border-radius: var(--radius-full);
      font-weight: 700;
    }

    /* --- CONTENT AREA --- */
    .content {
      flex: 1;
      padding: 24px;
      padding-bottom: 60px;
    }

    /* --- HERO SECTION --- */
    .hero {
      text-align: center;
      padding: 32px 16px;
      margin-bottom: 40px;
      background: linear-gradient(180deg, var(--bg-surface) 0%, var(--bg-page) 100%);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(0,0,0,0.03);
    }

    .hero-icon {
      font-size: 3rem;
      margin-bottom: 16px;
      display: inline-block;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .hero h1 {
      font-size: 1.75rem;
      line-height: 1.2;
      color: var(--text-main);
      margin-bottom: 12px;
      font-weight: 800;
    }

    .hero p {
      color: var(--text-muted);
      margin-bottom: 24px;
      font-size: 1rem;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }

    .hero-btns {
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-width: 320px;
      margin: 0 auto;
    }

    @media (min-width: 500px) {
      .hero-btns { flex-direction: row; }
    }

    /* --- BUTTONS --- */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px 24px;
      border-radius: var(--radius-md);
      font-weight: 700;
      text-decoration: none;
      transition: transform 0.2s, box-shadow 0.2s;
      flex: 1;
      border: none;
      cursor: pointer;
      font-family: inherit;
    }

    .btn:active { transform: scale(0.98); }

    .btn-primary {
      background: var(--primary);
      color: white;
      box-shadow: 0 4px 12px rgba(123, 165, 145, 0.4);
    }
    .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); }

    .btn-outline {
      background: white;
      color: var(--text-main);
      border: 2px solid #E3DED7;
    }
    .btn-outline:hover { border-color: var(--primary); color: var(--primary); }

    /* --- SECTION HEADERS --- */
    .section-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .section-title {
      font-size: 1.25rem;
      font-weight: 800;
      color: var(--text-main);
    }

    /* --- APP CARDS GRID --- */
    .app-grid {
      display: grid;
      gap: 20px;
      margin-bottom: 48px;
    }

    .app-card {
      background: white;
      border-radius: var(--radius-lg);
      padding: 20px;
      border: 1px solid rgba(0,0,0,0.05);
      box-shadow: var(--shadow-sm);
      transition: all 0.25s ease;
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .app-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-md);
      border-color: rgba(0,0,0,0.1);
    }

    /* Theme Accents */
    .app-card[data-theme="mathe"] .icon-box { background: var(--color-mathe-bg); color: var(--color-mathe); }
    .app-card[data-theme="mathe"] .app-link { background: var(--color-mathe); color: white; }

    .app-card[data-theme="schreiben"] .icon-box { background: var(--color-schreiben-bg); color: var(--color-schreiben); }
    .app-card[data-theme="schreiben"] .app-link { background: var(--color-schreiben); color: white; }

    .app-card[data-theme="deutsch"] .icon-box { background: var(--color-deutsch-bg); color: var(--color-deutsch); }
    .app-card[data-theme="deutsch"] .app-link { background: var(--color-deutsch); color: white; }

    .app-card[data-theme="logik"] .icon-box { background: var(--color-logik-bg); color: var(--color-logik); }
    .app-card[data-theme="logik"] { opacity: 0.9; }

    /* Card Layout */
    .card-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 16px;
    }

    .icon-box {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
    }
    
    .icon-box svg { width: 24px; height: 24px; stroke-width: 2.5; }

    .tag {
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 4px 8px;
      border-radius: 6px;
      background: #F4F4F5;
      color: #71717A;
    }

    .card-title {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .card-desc {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 20px;
      flex-grow: 1;
    }

    .app-link {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      padding: 12px;
      border-radius: 12px;
      font-weight: 700;
      text-decoration: none;
      font-size: 0.9rem;
      transition: opacity 0.2s;
    }
    
    .app-link:hover { opacity: 0.9; }
    .app-link.disabled { background: #E4E4E7; color: #A1A1AA; cursor: not-allowed; }

    /* --- INFO SECTION --- */
    .info-box {
      background: #FDFBF7;
      border: 2px dashed #E3DED7;
      border-radius: var(--radius-lg);
      padding: 24px;
    }
    
    .features-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 16px;
      list-style: none;
      margin-top: 16px;
    }

    .feature-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 8px;
      font-size: 0.85rem;
      color: var(--text-muted);
    }
    
    .feature-icon {
      width: 32px;
      height: 32px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
      box-shadow: var(--shadow-sm);
    }

    /* --- FOOTER --- */
    .footer {
      text-align: center;
      padding: 20px;
      font-size: 0.8rem;
      color: #9CA3AF;
      border-top: 1px solid rgba(0,0,0,0.05);
      background: #FAFAFA;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }
    .footer a { color: inherit; font-weight: 600; }

    .visitor-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: #E5E7EB;
      color: #6B7280;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
      border: 1px solid rgba(0,0,0,0.05);
      transition: all 0.3s ease;
    }
    
    .visitor-badge.live {
      background: #DEF7EC;
      color: #03543F;
      border-color: #31C48D;
    }

    .visitor-badge svg {
      width: 14px;
      height: 14px;
      opacity: 0.7;
    }

  </style>
</head>
<body>

  <div class="page-wrapper">
    <main class="app-shell">
      
      <!-- TOP NAVIGATION -->
      <nav class="topbar">
        <div class="brand">
          <!-- Logo Icon -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>
          Lernapps
        </div>
        <div class="grade-badge">1.â€“4. Klasse</div>
      </nav>

      <div class="content">
        
        <!-- HERO -->
        <section class="hero">
          <div class="hero-icon">ðŸš€</div>
          <h1>Mathe & Deutsch<br>einfach Ã¼ben.</h1>
          <p>Kleine, fokussierte Browser-Apps fÃ¼r die Grundschule. Ohne Werbung, ohne Anmeldung, direkt loslegen.</p>
          
          <div class="hero-btns">
            <a href="https://humaneed.github.io/Mathe/" class="btn btn-primary">Mathe-Trainer</a>
            <a href="#apps" class="btn btn-outline">Alle Apps</a>
          </div>
        </section>

        <!-- APP GRID -->
        <div id="apps">
          <div class="section-header">
            <h2 class="section-title">WÃ¤hle ein Fach</h2>
          </div>

          <div class="app-grid">
            
            <!-- Mathe -->
            <article class="app-card" data-theme="mathe">
              <div class="card-top">
                <div class="icon-box">
                  <!-- Calculator Icon -->
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="16" y1="14" x2="16" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>
                </div>
                <span class="tag">1.â€“4. Klasse</span>
              </div>
              <h3 class="card-title">Mathe-Trainer</h3>
              <p class="card-desc">Plus, Minus, Mal & Geteilt. Mit Schritt-fÃ¼r-Schritt Hilfe beim schriftlichen Rechnen.</p>
              <a href="https://humaneed.github.io/Mathe/" class="app-link">Rechnen starten â†’</a>
            </article>

            <!-- Schreiben -->
            <article class="app-card" data-theme="schreiben">
              <div class="card-top">
                <div class="icon-box">
                  <!-- Pen Icon -->
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>
                </div>
                <span class="tag">Vorschule â€“ 2.</span>
              </div>
              <h3 class="card-title">ABC Nachspuren</h3>
              <p class="card-desc">Buchstaben und Zahlen auf Schullinien schreiben lernen. Bunt und entspannt.</p>
              <a href="https://humaneed.github.io/Nachspuren/" class="app-link">Buchstaben Ã¼ben â†’</a>
            </article>

            <!-- Deutsch -->
            <article class="app-card" data-theme="deutsch">
              <div class="card-top">
                <div class="icon-box">
                  <!-- Book Open Icon -->
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                </div>
                <span class="tag">2.â€“4. Klasse</span>
              </div>
              <h3 class="card-title">Deutsch Ã¼ben</h3>
              <p class="card-desc">Satzbau, FragewÃ¶rter und LÃ¼ckentexte. Inklusive Vorlesefunktion.</p>
              <a href="https://humaneed.github.io/Deutsch/" class="app-link">Sprache trainieren â†’</a>
            </article>

            <!-- Logik -->
            <article class="app-card" data-theme="logik">
              <div class="card-top">
                <div class="icon-box">
                  <!-- Puzzle Icon -->
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M19.439 15.424a1 1 0 0 0-1.026-.067c-.895.539-1.928.747-2.923.456a3.999 3.999 0 0 0-3.957-6.023c-.927.215-1.896-.034-2.735-.615a1 1 0 0 0-1.157 0c-.839.58-1.808.83-2.735.614A3.999 3.999 0 0 0 .949 15.812c.995.291 2.028.083 2.923-.456a1 1 0 0 0 1.026.067c.725-.436 1.488-.667 2.25-.667.76 0 1.523.23 2.248.667a1 1 0 0 0 1.028-.067c.895-.539 1.928-.747 2.923-.456a3.999 3.999 0 0 0 3.957 6.023c.927-.215 1.896.034 2.735.615a1 1 0 0 0 1.157 0c.839-.58 1.808-.83 2.735-.614a3.999 3.999 0 0 0 3.957-6.023c-.995-.291-2.028-.083-2.923.456a1 1 0 0 0-1.026-.067c-.725.436-1.488.667-2.25.667-.76 0-1.523-.23-2.248-.667z"/></svg>
                </div>
                <span class="tag">Coming Soon</span>
              </div>
              <h3 class="card-title">Logik & RÃ¤tsel</h3>
              <p class="card-desc">Knobeleien, Muster und Strategien. Dieser Bereich entsteht gerade.</p>
              <span class="app-link disabled">Bald verfÃ¼gbar</span>
            </article>

          </div>
        </div>

        <!-- PARENT INFO AREA -->
        <section class="info-box">
          <div class="section-header" style="margin-bottom: 10px; justify-content: center;">
            <h2 class="section-title" style="font-size: 1rem;">Warum diese Apps?</h2>
          </div>
          
          <ul class="features-list">
            <li class="feature-item">
              <div class="feature-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
              </div>
              <span>Sicher &<br>Werbefrei</span>
            </li>
            <li class="feature-item">
              <div class="feature-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
              </div>
              <span>LÃ¤uft im<br>Browser</span>
            </li>
            <li class="feature-item">
              <div class="feature-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
              </div>
              <span>Keine<br>Daten-Sammelwut</span>
            </li>
          </ul>
        </section>

      </div>

      <footer class="footer">
        <div>
          <p>Ein Open-Source Projekt fÃ¼r bessere Bildung.</p>
          <p style="margin-top: 4px; font-size: 0.75rem"><a href="#">Auf GitHub ansehen</a></p>
        </div>
        
        <!-- BesucherzÃ¤hler Badge -->
        <div class="visitor-badge" id="visitor-badge" title="Echtzeit-BesucherzÃ¤hler (Firebase)">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
          <span id="visitor-count">...</span>
          <span>Besucher</span>
        </div>
      </footer>
    </main>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    import { getFirestore, doc, setDoc, onSnapshot, increment } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    // 1. Firebase Initialisierung
    const firebaseConfig = JSON.parse(__firebase_config);
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

    // UI Elemente
    const counterElement = document.getElementById('visitor-count');
    const badgeElement = document.getElementById('visitor-badge');

    // 2. Anonyme Anmeldung & ZÃ¤hler-Logik
    const initCounter = async () => {
      try {
        // Zuerst anmelden, bevor wir auf die Datenbank zugreifen (Security Rule!)
        // Meldet den Nutzer mit dem bereitgestellten Token an oder anonym, falls das Token fehlt.
        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
             await signInWithCustomToken(auth, __initial_auth_token);
        } else {
             await signInAnonymously(auth);
        }

        // Pfad fÃ¼r den globalen BesucherzÃ¤hler (Ã¶ffentlich zugÃ¤nglich)
        const counterRef = doc(db, 'artifacts', appId, 'public', 'data', 'visitor_stats', 'global');

        // Check: Haben wir diesen Besucher in dieser Session schon gezÃ¤hlt? 
        // Dies verhindert, dass einfaches Neuladen des Browsers den ZÃ¤hler erhÃ¶ht.
        const hasVisited = sessionStorage.getItem('visited_session');

        if (!hasVisited) {
          // Neuer Besuch -> ZÃ¤hler atomar in der Datenbank erhÃ¶hen
          // setDoc mit merge: true erstellt das Dokument, falls es noch nicht existiert
          await setDoc(counterRef, { count: increment(1) }, { merge: true });
          
          // Markieren, dass wir gezÃ¤hlt haben
          sessionStorage.setItem('visited_session', 'true');
        }

        // 3. Echtzeit-Listener: Sobald sich die Zahl in der DB Ã¤ndert, update UI
        onSnapshot(counterRef, (docSnap) => {
          if (docSnap.exists()) {
            const data = docSnap.data();
            const count = data.count || 0;
            
            // UI Update mit Animationseffekt
            counterElement.textContent = count.toLocaleString('de-DE');
            badgeElement.classList.add('live'); // FÃ¼gt grÃ¼nes Leuchten hinzu
          }
        }, (error) => {
            console.error("Fehler beim Laden des ZÃ¤hlers:", error);
            counterElement.textContent = "---";
        });

      } catch (err) {
        console.error("Firebase Init Error:", err);
        // Fallback, damit UI nicht kaputt aussieht
        counterElement.textContent = "---";
      }
    };

    // Starten
    initCounter();

  </script>

</body>
</html>
